global _start

section .data
        msg db "Length: ", 0
        msg_len equ $ - msg

section .bss
        valeur_entree resb 128
        length resb 4
section .text

_start:

        mov rax, 0
        mov rdi, 0
        mov rsi, valeur_entree
        mov rdx, 128
        syscall

        xor rcx,rcx
        mov rsi, valeur_entree
length_loop:
        cmp byte [rsi], 10
        je length_done
        cmp byte [rsi], 10
        je length_done
        inc rcx
        inc rsi
        jmp length_loop

length_done:
        mov [length], rcx

        mov eax, 1
        mov edi, 1
        mov rsi, msg
        mov edx, msg_len
        syscall
